<!-- h1 ã¨ line-length ã¯ã‚¹ãƒ«ãƒ¼ã•ã›ã‚‹ -->
<!-- markdownlint-disable MD013 MD025 -->

# 09/08

## ã¯ã˜ã‚ã¾ã—ã¦

TIL ã‚’å§‹ã‚ã¦ã¿ã‚‹ã€‚

ãƒªãƒã‚¸ãƒˆãƒªæ§‹æˆã¯æŠ€è¡“ã‚«ãƒ†ã‚´ãƒªãƒ¼ã§åˆ‡ã£ãŸã‚Šã€æœˆæ—¥ã§åˆ‡ã£ãŸã‚Šäººãã‚Œãã‚Œã£ã½ã„ã€‚

ã¨ã‚Šã‚ãˆãšæœˆã”ã¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ h1 ã§æ—¥ä»˜ã€h2 ã§ãƒˆãƒ”ãƒƒã‚¯ã§ã‚„ã£ã¦ã¿ã‚‹ã€‚  

X ã«ã‹ãã‚ˆã‚Šè©³ç´°ã«ãƒ–ãƒ­ã‚°ã«æ›¸ãææ–™ã«ã€‚ãã‚‰ã„ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§

# 09/09

## GitHub CLI ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨ã«èªè¨¼ã™ã‚‹

gh ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿç¾ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

ä¼šç¤¾ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨å€‹äººã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ã„åˆ†ã‘ã‚‹å ´åˆ

ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ³ç¢ºèª

```sh
gh auth status
```

ä¼šç¤¾ç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹

```sh
~/personal/til +[chore/20250909]$ gh auth status 
github.com
  âœ“ Logged in to github.com account company_account (keyring)
  - Active account: true
  - Git operations protocol: https
  - Token: gho_************************************
  - Token scopes: 'gist', 'read:org', 'repo', 'workflow'
```

å€‹äººã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸçŠ¶æ…‹ã§ãƒ­ã‚°ã‚¤ãƒ³ã‚’å®Ÿæ–½ã™ã‚‹

```sh
gh auth login
```

å€‹äººã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹

```sh
~/personal/til +[chore/20250909]$ gh auth login 
? Where do you use GitHub? GitHub.com
? What is your preferred protocol for Git operations on this host? HTTPS
? Authenticate Git with your GitHub credentials? Yes
? How would you like to authenticate GitHub CLI? Login with a web browser

! First copy your one-time code: xxxx-xxxx
Press Enter to open https://github.com/login/device in your browser... 
âœ“ Authentication complete.
- gh config set -h github.com git_protocol https
âœ“ Configured git protocol
âœ“ Logged in as personal_account
```

ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®ç¢ºèªã‚’ã™ã‚‹ã¨ä»¥ä¸‹

```sh
~/personal/til +[chore/20250909]$ gh auth status
github.com
  âœ“ Logged in to github.com account personal_account (keyring)
  - Active account: true
  - Git operations protocol: https
  - Token: gho_************************************
  - Token scopes: 'gist', 'read:org', 'repo', 'workflow'

  âœ“ Logged in to github.com account company_account (keyring)
  - Active account: false
  - Git operations protocol: https
  - Token: gho_************************************
  - Token scopes: 'gist', 'read:org', 'repo', 'workflow'
```

`Active account: true` ã«ãªã£ã¦ã„ã‚‹æ–¹ãŒä»Šé¸æŠã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

åˆ‡ã‚Šæ›¿ãˆã‚‹ã«ã¯ auth switch ã§åˆ‡ã‚Šæ›¿ãˆã‚‹

```sh
gh auth swith
```

æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã‚‹

```sh
~/personal/til +[chore/20250909]$ gh auth switch
âœ“ Switched active account for github.com to company_account
```

ã“ã‚Œã§ã‚‚ã„ã„ã‘ã©ç‰¹å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã ã‘å›ºå®šã—ã¦ãŠããŸã„ã€‚
æ˜æ—¥ãŸã‚ãã†ã€‚

# 09/10

## lefthook

Go ã§æ›¸ã‹ã‚ŒãŸ Git ã® hook ã‚’ç®¡ç†ã™ã‚‹ãƒ„ãƒ¼ãƒ«

- <https://github.com/evilmartians/lefthook>
- <https://lefthook.dev/>

Huskey ã§ã¯ Node ç’°å¢ƒãŒå¿…è¦ã ãŒã“ã¡ã‚‰ã¯ãƒã‚¤ãƒŠãƒªã®ã¿ã§å‹•ä½œã™ã‚‹

### Why lefthook

<https://github.com/evilmartians/lefthook?tab=readme-ov-file#why-lefthook>

Lefthook ã®ã‚ˆã„ã¨ã“ã‚

- ä¸¦åˆ—å®Ÿè¡ŒãŒå¯èƒ½ãª parallel ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæœ‰ã‚‹
- Glob ã¨ filter ã§å®Ÿè¡Œå¯¾è±¡ã®çµã‚Šè¾¼ã¿ã‚„é™¤å¤–ãŒæŸ”è»Ÿã«å¯èƒ½
- ã‚¸ãƒ§ãƒ–ã”ã¨ã« Current Working Directory ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã€ãƒ¢ãƒãƒ¬ãƒæ§‹æˆç­‰ã§ã‚‚è¨­å®šã—ã‚„ã™ã„
- ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰ã ã‘ã§ã¯ãªãã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
- docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å®Ÿè¡Œã‚‚å¯èƒ½
- lefthook.yml ã‚’åˆ©ç”¨ã—ã¦ hook ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã€lefthook-local.yml ã‚’ç”¨æ„ã™ã‚‹ã“ã¨ã§å€‹äººè¨­å®šã‚‚è¿½åŠ å¯èƒ½
- lefthook run pre-commit ã§éšæ™‚å®Ÿè¡Œã‚‚å¯èƒ½
- ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼çš„åˆ©ç”¨æ–¹æ³•ã‚‚ã§ãã‚‹

### æ‰€æ„Ÿ

è¨­å®šã—ã¦ä½¿ã£ã¦ã¿ãŸã‘ã©ä¾¿åˆ©ã€‚ä¸¦åˆ—å®Ÿè¡Œã¯ã‚³ãƒŸãƒƒãƒˆã§å¾…ãŸã•ã‚Œã‚‹ã“ã¨ãŒãªãã‚ˆã•ãã†

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã‚‚è¨­å®šã—ã¦ã¿ã‚‹ã‹

# 09/11

## kms ã® alias ã® terraform import

import ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ `Error: Cannot import non-existent remote object` ãŒè¡¨ç¤ºã•ã‚Œã¦å›°ã£ãŸ

```imports.tf
import {
  to = aws_kms_key.hoge
  id = "arn:aws:kms:....."
}

import {
  to = aws_kms_alias.hoge
  id = "dev/kagidayo"
}
```

å•é¡Œãªã•ãã†ã«è¦‹ãˆã¦ã„ãŸã®ã ãŒæ­£ã—ãã¯ã“ã†

```tf
import {
  to = aws_kms_key.hoge
  id = "arn:aws:kms:....."
}

import {
  to = aws_kms_alias.hoge
  id = "alias/dev/kagidayo"
}
```

`alias/` ãŒæŠœã‘ã¦ã„ãŸã®ã§ã‚ã£ãŸ....

```diff
 import {
   to = aws_kms_alias.hoge
-  id = "dev/kagidayo"
+  id = "alias/dev/kagidayo"
 }
```

30åˆ†ãã‚‰ã„èª¿ã¹ãŸã‚ˆ...

# 09/12

## pre-commit hook è©¦ã—ã¦ã¿ã‚‹

ãƒ†ã‚­ã‚¹ãƒˆã¨ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã® lint ã‚’è©¦ã—ã¦ã¿ã‚‹

[markdownlint-cli2](https://github.com/DavidAnson/markdownlint-cli2) ã¨ã„ã† linter ãŒ brew ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚‰ã—ã„

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ lefthook ã«è¨­å®šã—ã¦ã¿ã‚‹

```yaml:lefthook.yml
---
pre-commit:
  jobs:
    - name: markdownlint
      glob: "*.md"
      run: markdownlint-cli2 {staged_files}
```

æ‰‹å‹•ã§ `lefthook run pre-commit` ã—ã¦ã¿ãŸ

```sh
~/personal/til ![chore/20250912]$ lefthook run pre-commit                    
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ ğŸ¥Š lefthook v1.12.3  hook: pre-commit â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
sync hooks: âœ”ï¸ (pre-commit)
â”ƒ  markdownlint â¯ 

markdownlint-cli2 v0.18.1 (markdownlint v0.38.0)
Finding: 202509.md
Linting: 1 file(s)
Summary: 19 error(s)
202509.md:13 MD025/single-title/single-h1 Multiple top-level headings in the same document [Context: "09/09"]
202509.md:22 MD031/blanks-around-fences Fenced code blocks should be surrounded by blank lines [Context: "```sh"]
202509.md:27 MD031/blanks-around-fences Fenced code blocks should be surrounded by blank lines [Context: "```sh"]
202509.md:38 MD031/blanks-around-fences Fenced code blocks should be surrounded by blank lines [Context: "```sh"]
202509.md:43 MD031/blanks-around-fences Fenced code blocks should be surrounded by blank lines [Context: "```sh"]
202509.md:59 MD031/blanks-around-fences Fenced code blocks should be surrounded by blank lines [Context: "```sh"]
202509.md:84 MD031/blanks-around-fences Fenced code blocks should be surrounded by blank lines [Context: "```sh"]
202509.md:92 MD025/single-title/single-h1 Multiple top-level headings in the same document [Context: "09/10"]
202509.md:97 MD032/blanks-around-lists Lists should be surrounded by blank lines [Context: "- https://github.com/evilmarti..."]
202509.md:97:3 MD034/no-bare-urls Bare URL used [Context: "https://github.com/evilmartian..."]
202509.md:98:3 MD034/no-bare-urls Bare URL used [Context: "https://lefthook.dev/"]
202509.md:102 MD022/blanks-around-headings Headings should be surrounded by blank lines [Expected: 1; Actual: 0; Below] [Context: "### Why lefthook"]
202509.md:103:1 MD034/no-bare-urls Bare URL used [Context: "https://github.com/evilmartian..."]
202509.md:116 MD012/no-multiple-blanks Multiple consecutive blank lines [Expected: 1; Actual: 2]
202509.md:123 MD025/single-title/single-h1 Multiple top-level headings in the same document [Context: "09/11"]
202509.md:125:34 MD009/no-trailing-spaces Trailing spaces [Expected: 0 or 2; Actual: 1]
202509.md:167 MD025/single-title/single-h1 Multiple top-level headings in the same document [Context: "09/12"]
202509.md:173:81 MD013/line-length Line length [Expected: 80; Actual: 100]
202509.md:177 MD012/no-multiple-blanks Multiple consecutive blank lines [Expected: 1; Actual: 2]

                                      
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
summary: (done in 0.17 seconds)       
ğŸ¥Š markdownlint (0.16 seconds)
```

ãŠãƒ¼ã€‚ãªã‚‹ã»ã©ã€‚ãŸã—ã‹ã«

`--fix` ã¤ã‘ã¦å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚

ç›´ã—ã¦ãã‚ŒãŸã£ã½ã„ã€‚

ã¨ã„ã†ã‚ã‘ã§ pre-commit ã§ä¿®æ­£ã•ã›ã‚Œã°ã„ã„ã‹ã€‚ç´°ã‹ã„ã¨ã“ã‚ã¯ä»Šå¾Œèª¿æ•´ã—ã¦ã„ã“ã†

ãŸã ã‚ˆãè¦‹ã‚‹ã¨ h1 ãŒè¤‡æ•°ã‚ã‚‹ã®ã¨ã€1è¡Œã®é•·ã•ãŒå¼•ãç¶šãæ€’ã‚‰ã‚Œã¦ã„ã‚‹

```sh
Summary: 20 error(s)
202509.md:13 MD025/single-title/single-h1 Multiple top-level headings in the same document [Context: "09/09"]
202509.md:98 MD025/single-title/single-h1 Multiple top-level headings in the same document [Context: "09/10"]
202509.md:130 MD025/single-title/single-h1 Multiple top-level headings in the same document [Context: "09/11"]
202509.md:174 MD025/single-title/single-h1 Multiple top-level headings in the same document [Context: "09/12"]
202509.md:180:81 MD013/line-length Line length [Expected: 80; Actual: 100]
202509.md:207:81 MD013/line-length Line length [Expected: 80; Actual: 109]
202509.md:208:81 MD013/line-length Line length [Expected: 80; Actual: 113]
202509.md:209:81 MD013/line-length Line length [Expected: 80; Actual: 113]
202509.md:210:81 MD013/line-length Line length [Expected: 80; Actual: 113]
...
```

ã“ã®è¾ºã¯ã‚„ã‚€ã‚’ãˆãªã„ã ã‚ã†ã¨ã„ã†ã“ã¨ã§ç„¡è¦–ã§ããªã„ã‹è©¦ã—ã¦ã¿ã‚‹

[Configuration](https://github.com/DavidAnson/markdownlint/blob/v0.32.1/README.md#configuration) ã‚’å‚è€ƒã«

`<!-- markdownlint-disable MD013 MD025 -->` ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ã«è¿½åŠ ã—ãŸã‚‰æ¶ˆãˆãŸã®ã§ OK :tada:  

```sh
~/personal/til ![chore/20250912]$ lefthook run pre-commit
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ ğŸ¥Š lefthook v1.12.3  hook: pre-commit â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â”ƒ  markdownlint â¯ 

markdownlint-cli2 v0.18.1 (markdownlint v0.38.0)
Finding: 202509.md
Linting: 1 file(s)
Summary: 0 error(s)

                                      
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
summary: (done in 0.16 seconds)       
âœ”ï¸ markdownlint (0.15 seconds)
```

# 09/16

## ECS on Fargate ã§ã® EFS åˆ©ç”¨ã«ã¤ã„ã¦

EFS ã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ãŸã‚ã«å„ Availability Zone ã«ãƒã‚¦ãƒ³ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ä½œæˆã—ã¦ã„ã‚‹

ECS on Fargate ã§ EFS ã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹å ´åˆã¯ãƒœãƒªãƒ¥ãƒ¼ãƒ è¨­å®šã‚’è¡Œã†ãŒã€ãƒã‚¦ãƒ³ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ã¯ãªããƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  ID ã‚’æŒ‡å®šã™ã‚‹  

ãƒã‚¦ãƒ³ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯æŒ‡å®šã•ã‚Œã¦ã„ãªã„ãŒã‚¿ã‚¹ã‚¯èµ·å‹•æ™‚ã®ã‚µãƒ–ãƒãƒƒãƒˆã® Availability Zone ã«å¿œã˜ã¦å­˜åœ¨ã™ã‚‹ãƒã‚¦ãƒ³ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹

ã‚¿ã‚¹ã‚¯èµ·å‹•æ™‚ã®ã‚µãƒ–ãƒãƒƒãƒˆã® Availability Zone ã«ãƒã‚¦ãƒ³ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒãªã„å ´åˆã¯ã‚¿ã‚¹ã‚¯èµ·å‹•ã‚¨ãƒ©ãƒ¼ã«ãªã‚Š `ResourceInitializationError` ãŒè¡¨ç¤ºã•ã‚Œã‚‹

åˆ¥ Availability Zone ã®ãƒã‚¦ãƒ³ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’è‡ªå‹•çš„ã«åˆ©ç”¨ã™ã‚‹ã‚ˆã†ãªã“ã¨ã¯ãªã„

ã¤ã¾ã‚Š Availability Zone ã®éšœå®³ç­‰ãŒç™ºç”Ÿã—ã¦ãƒã‚¦ãƒ³ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚‹ã¨ ECS ã‚¿ã‚¹ã‚¯è‡ªä½“ãŒèµ·å‹•ã—ãªããªã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦
