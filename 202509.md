# 09/08

## はじめまして

TIL を始めてみる。

リポジトリ構成は技術カテゴリーで切ったり、月日で切ったり人それぞれっぽい。

とりあえず月ごとのファイルを作成して h1 で日付、h2 でトピックでやってみる。  

X にかくより詳細にブログに書く材料に。くらいのイメージで

# 09/09

## GitHub CLI でディレクトリごとに認証する

gh コマンドで実現するパターン

会社アカウントと個人アカウントを使い分ける場合

ログイン状況確認
```sh
gh auth status
```

会社用アカウントでログインしている
```sh
~/personal/til +[chore/20250909]$ gh auth status 
github.com
  ✓ Logged in to github.com account company_account (keyring)
  - Active account: true
  - Git operations protocol: https
  - Token: gho_************************************
  - Token scopes: 'gist', 'read:org', 'repo', 'workflow'
```

個人アカウントをブラウザでログインした状態でログインを実施する
```sh
gh auth login
```

個人アカウントにログインできる
```sh
~/personal/til +[chore/20250909]$ gh auth login 
? Where do you use GitHub? GitHub.com
? What is your preferred protocol for Git operations on this host? HTTPS
? Authenticate Git with your GitHub credentials? Yes
? How would you like to authenticate GitHub CLI? Login with a web browser

! First copy your one-time code: xxxx-xxxx
Press Enter to open https://github.com/login/device in your browser... 
✓ Authentication complete.
- gh config set -h github.com git_protocol https
✓ Configured git protocol
✓ Logged in as personal_account
```

ログイン状態の確認をすると以下
```sh
~/personal/til +[chore/20250909]$ gh auth status
github.com
  ✓ Logged in to github.com account personal_account (keyring)
  - Active account: true
  - Git operations protocol: https
  - Token: gho_************************************
  - Token scopes: 'gist', 'read:org', 'repo', 'workflow'

  ✓ Logged in to github.com account company_account (keyring)
  - Active account: false
  - Git operations protocol: https
  - Token: gho_************************************
  - Token scopes: 'gist', 'read:org', 'repo', 'workflow'
```

`Active account: true` になっている方が今選択されているアカウント

切り替えるには auth switch で切り替える

```sh
gh auth swith
```

次のように表示される
```sh
~/personal/til +[chore/20250909]$ gh auth switch
✓ Switched active account for github.com to company_account
```

これでもいいけど特定ディレクトリ配下だけ固定しておきたい。
明日ためそう。

# 09/10

## lefthook

Go で書かれた Git の hook を管理するツール
- https://github.com/evilmartians/lefthook
- https://lefthook.dev/

Huskey では Node 環境が必要だがこちらはバイナリのみで動作する

### Why lefthook
https://github.com/evilmartians/lefthook?tab=readme-ov-file#why-lefthook

Lefthook のよいところ

- 並列実行が可能な parallel オプションが有る
- Glob と filter で実行対象の絞り込みや除外が柔軟に可能
- ジョブごとに Current Working Directory を指定することができ、モノレポ構成等でも設定しやすい
- 任意のコマンドだけではなくスクリプトを実行することもできる
- docker イメージの実行も可能
- lefthook.yml を利用して hook を管理することができ、lefthook-local.yml を用意することで個人設定も追加可能
- lefthook run pre-commit で随時実行も可能
- タスクランナー的利用方法もできる


### 所感

設定して使ってみたけど便利。並列実行はコミットで待たされることがなくよさそう

このリポジトリでも設定してみるか